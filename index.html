<!DOCTYPE html>
<html>
<head>
    <title>SFDC Inspector Reloaded</title>
    <style>
        body { font-family: system-ui; max-width: 800px; margin: 20px auto; padding: 20px; }
        #messages { background: #f5f5f5; padding: 15px; border-radius: 4px; }
    </style>
</head>
<body>
    <div id="messages">Loading...</div>
    <script>
        const messagesDiv = document.getElementById('messages');
        
        window.addEventListener('message', function(event) {
            // Log all messages for debugging
            console.log('Message received:', event.data);
            
            // Only process messages from our extension
            if (event.data.insextInitRequest) {
                messagesDiv.innerHTML += '<pre>Init Request: ' + JSON.stringify(event.data, null, 2) + '</pre>';
            } else if (event.data.iFrameLocalStorage) {
                messagesDiv.innerHTML += '<pre>Storage Data: ' + JSON.stringify(event.data.iFrameLocalStorage, null, 2) + '</pre>';
            }
        });

        // Create the iframe with a small delay to ensure our event listener is ready
        setTimeout(() => {
            const initFrame = document.createElement('iframe');
            initFrame.src = 'chrome-extension://apfebnafilpofmbeebponacgbdhnkmnl/popup.html';
            initFrame.style.display = 'none';
            document.body.appendChild(initFrame);
        }, 100);
    </script>
</body>
</html>
